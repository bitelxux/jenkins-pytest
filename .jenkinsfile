node(){

    stage('setup'){
        sh "rm -rf ${WORKSPACE}/*"
    }

    stage('checkout'){
        checkout scm
    }

    stage("tests"){
        sh "pytest --cov=. tests/test.py --tb=line --junitxml=tests-results/results.xml"
    }

    stage("publish"){
       junit allowEmptyResults: true, testResults: 'tests-results/results.xml'
    }
}
